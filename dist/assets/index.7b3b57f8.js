(function(){const G=document.createElement("link").relList;if(G&&G.supports&&G.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))z(M);new MutationObserver(M=>{for(const I of M)if(I.type==="childList")for(const ut of I.addedNodes)ut.tagName==="LINK"&&ut.rel==="modulepreload"&&z(ut)}).observe(document,{childList:!0,subtree:!0});function it(M){const I={};return M.integrity&&(I.integrity=M.integrity),M.referrerpolicy&&(I.referrerPolicy=M.referrerpolicy),M.crossorigin==="use-credentials"?I.credentials="include":M.crossorigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function z(M){if(M.ep)return;M.ep=!0;const I=it(M);fetch(M.href,I)}})();var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qe={};(function(){function T(u){var l=0;return function(){return l<u.length?{done:!1,value:u[l++]}:{done:!0}}}var G=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,l,y){return u==Array.prototype||u==Object.prototype||(u[l]=y.value),u};function it(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof kt=="object"&&kt];for(var l=0;l<u.length;++l){var y=u[l];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var z=it(this);function M(u,l){if(l)t:{var y=z;u=u.split(".");for(var p=0;p<u.length-1;p++){var U=u[p];if(!(U in y))break t;y=y[U]}u=u[u.length-1],p=y[u],l=l(p),l!=p&&l!=null&&G(y,u,{configurable:!0,writable:!0,value:l})}}M("Symbol",function(u){function l(Y){if(this instanceof l)throw new TypeError("Symbol is not a constructor");return new y(p+(Y||"")+"_"+U++,Y)}function y(Y,f){this.g=Y,G(this,"description",{configurable:!0,writable:!0,value:f})}if(u)return u;y.prototype.toString=function(){return this.g};var p="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",U=0;return l}),M("Symbol.iterator",function(u){if(u)return u;u=Symbol("Symbol.iterator");for(var l="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),y=0;y<l.length;y++){var p=z[l[y]];typeof p=="function"&&typeof p.prototype[u]!="function"&&G(p.prototype,u,{configurable:!0,writable:!0,value:function(){return I(T(this))}})}return u});function I(u){return u={next:u},u[Symbol.iterator]=function(){return this},u}function ut(u){var l=typeof Symbol<"u"&&Symbol.iterator&&u[Symbol.iterator];return l?l.call(u):{next:T(u)}}function X(){this.i=!1,this.g=null,this.o=void 0,this.j=1,this.m=0,this.h=null}function yt(u){if(u.i)throw new TypeError("Generator is already running");u.i=!0}X.prototype.l=function(u){this.o=u};function Et(u,l){u.h={F:l,G:!0},u.j=u.m}X.prototype.return=function(u){this.h={return:u},this.j=this.m};function mt(u){this.g=new X,this.h=u}function _t(u,l){yt(u.g);var y=u.g.g;return y?Tt(u,"return"in y?y.return:function(p){return{value:p,done:!0}},l,u.g.return):(u.g.return(l),ft(u))}function Tt(u,l,y,p){try{var U=l.call(u.g.g,y);if(!(U instanceof Object))throw new TypeError("Iterator result "+U+" is not an object");if(!U.done)return u.g.i=!1,U;var Y=U.value}catch(f){return u.g.g=null,Et(u.g,f),ft(u)}return u.g.g=null,p.call(u.g,Y),ft(u)}function ft(u){for(;u.g.j;)try{var l=u.h(u.g);if(l)return u.g.i=!1,{value:l.value,done:!1}}catch(y){u.g.o=void 0,Et(u.g,y)}if(u.g.i=!1,u.g.h){if(l=u.g.h,u.g.h=null,l.G)throw l.F;return{value:l.return,done:!0}}return{value:void 0,done:!0}}function pt(u){this.next=function(l){return yt(u.g),u.g.g?l=Tt(u,u.g.g.next,l,u.g.l):(u.g.l(l),l=ft(u)),l},this.throw=function(l){return yt(u.g),u.g.g?l=Tt(u,u.g.g.throw,l,u.g.l):(Et(u.g,l),l=ft(u)),l},this.return=function(l){return _t(u,l)},this[Symbol.iterator]=function(){return this}}function ht(u){function l(p){return u.next(p)}function y(p){return u.throw(p)}return new Promise(function(p,U){function Y(f){f.done?p(f.value):Promise.resolve(f.value).then(l,y).then(Y,U)}Y(u.next())})}M("Promise",function(u){function l(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var v=this.j();try{f(v.resolve,v.reject)}catch(R){v.reject(R)}}function y(){this.g=null}function p(f){return f instanceof l?f:new l(function(v){v(f)})}if(u)return u;y.prototype.h=function(f){if(this.g==null){this.g=[];var v=this;this.i(function(){v.l()})}this.g.push(f)};var U=z.setTimeout;y.prototype.i=function(f){U(f,0)},y.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var v=0;v<f.length;++v){var R=f[v];f[v]=null;try{R()}catch(B){this.j(B)}}}this.g=null},y.prototype.j=function(f){this.i(function(){throw f})},l.prototype.j=function(){function f(B){return function(Q){R||(R=!0,B.call(v,Q))}}var v=this,R=!1;return{resolve:f(this.A),reject:f(this.l)}},l.prototype.A=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof l)this.C(f);else{t:switch(typeof f){case"object":var v=f!=null;break t;case"function":v=!0;break t;default:v=!1}v?this.v(f):this.m(f)}},l.prototype.v=function(f){var v=void 0;try{v=f.then}catch(R){this.l(R);return}typeof v=="function"?this.D(v,f):this.m(f)},l.prototype.l=function(f){this.u(2,f)},l.prototype.m=function(f){this.u(1,f)},l.prototype.u=function(f,v){if(this.h!=0)throw Error("Cannot settle("+f+", "+v+"): Promise already settled in state"+this.h);this.h=f,this.i=v,this.h===2&&this.B(),this.H()},l.prototype.B=function(){var f=this;U(function(){if(f.I()){var v=z.console;typeof v<"u"&&v.error(f.i)}},1)},l.prototype.I=function(){if(this.o)return!1;var f=z.CustomEvent,v=z.Event,R=z.dispatchEvent;return typeof R>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof v=="function"?f=new v("unhandledrejection",{cancelable:!0}):(f=z.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,R(f))},l.prototype.H=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)Y.h(this.g[f]);this.g=null}};var Y=new y;return l.prototype.C=function(f){var v=this.j();f.s(v.resolve,v.reject)},l.prototype.D=function(f,v){var R=this.j();try{f.call(v,R.resolve,R.reject)}catch(B){R.reject(B)}},l.prototype.then=function(f,v){function R(et,ct){return typeof et=="function"?function(Lt){try{B(et(Lt))}catch(wt){Q(wt)}}:ct}var B,Q,st=new l(function(et,ct){B=et,Q=ct});return this.s(R(f,B),R(v,Q)),st},l.prototype.catch=function(f){return this.then(void 0,f)},l.prototype.s=function(f,v){function R(){switch(B.h){case 1:f(B.i);break;case 2:v(B.i);break;default:throw Error("Unexpected state: "+B.h)}}var B=this;this.g==null?Y.h(R):this.g.push(R),this.o=!0},l.resolve=p,l.reject=function(f){return new l(function(v,R){R(f)})},l.race=function(f){return new l(function(v,R){for(var B=ut(f),Q=B.next();!Q.done;Q=B.next())p(Q.value).s(v,R)})},l.all=function(f){var v=ut(f),R=v.next();return R.done?p([]):new l(function(B,Q){function st(Lt){return function(wt){et[Lt]=wt,ct--,ct==0&&B(et)}}var et=[],ct=0;do et.push(void 0),ct++,p(R.value).s(st(et.length-1),Q),R=v.next();while(!R.done)})},l});var Rt=typeof Object.assign=="function"?Object.assign:function(u,l){for(var y=1;y<arguments.length;y++){var p=arguments[y];if(p)for(var U in p)Object.prototype.hasOwnProperty.call(p,U)&&(u[U]=p[U])}return u};M("Object.assign",function(u){return u||Rt});var Pt=this||self,Ft={facingMode:"user",width:640,height:480};function N(u,l){this.video=u,this.i=0,this.h=Object.assign(Object.assign({},Ft),l)}N.prototype.stop=function(){var u=this,l,y,p,U;return ht(new pt(new mt(function(Y){if(u.g){for(l=u.g.getTracks(),y=ut(l),p=y.next();!p.done;p=y.next())U=p.value,U.stop();u.g=void 0}Y.j=0})))},N.prototype.start=function(){var u=this,l;return ht(new pt(new mt(function(y){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists."),l=u.h,y.return(navigator.mediaDevices.getUserMedia({video:{facingMode:l.facingMode,width:l.width,height:l.height}}).then(function(p){Yt(u,p)}).catch(function(p){var U="Failed to acquire camera feed: "+p;throw console.error(U),alert(U),p}))})))};function Mt(u){window.requestAnimationFrame(function(){Ut(u)})}function Yt(u,l){u.g=l,u.video.srcObject=l,u.video.onloadedmetadata=function(){u.video.play(),Mt(u)}}function Ut(u){var l=null;u.video.paused||u.video.currentTime===u.i||(u.i=u.video.currentTime,l=u.h.onFrame()),l?l.then(function(){Mt(u)}):Mt(u)}var tt=["Camera"],Z=Pt;tt[0]in Z||typeof Z.execScript>"u"||Z.execScript("var "+tt[0]);for(var C;tt.length&&(C=tt.shift());)tt.length||N===void 0?Z[C]&&Z[C]!==Object.prototype[C]?Z=Z[C]:Z=Z[C]={}:Z[C]=N}).call(kt);var ze={};(function(){var T;function G(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var it=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};function z(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof kt=="object"&&kt];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var M=z(this);function I(t,e){if(e)t:{var n=M;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];if(!(i in n))break t;n=n[i]}t=t[t.length-1],r=n[t],e=e(r),e!=r&&e!=null&&it(n,t,{configurable:!0,writable:!0,value:e})}}I("Symbol",function(t){function e(c){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+i++,c)}function n(c,o){this.g=c,it(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),I("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<e.length;n++){var r=M[e[n]];typeof r=="function"&&typeof r.prototype[t]!="function"&&it(r.prototype,t,{configurable:!0,writable:!0,value:function(){return ut(G(this))}})}return t});function ut(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function X(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:G(t)}}function yt(t){if(!(t instanceof Array)){t=X(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}var Et=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},mt;if(typeof Object.setPrototypeOf=="function")mt=Object.setPrototypeOf;else{var _t;t:{var Tt={a:!0},ft={};try{ft.__proto__=Tt,_t=ft.a;break t}catch{}_t=!1}mt=_t?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var pt=mt;function ht(t,e){if(t.prototype=Et(e.prototype),t.prototype.constructor=t,pt)pt(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.ea=e.prototype}function Rt(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Pt(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}Rt.prototype.o=function(t){this.h=t};function Ft(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}Rt.prototype.return=function(t){this.j={return:t},this.g=this.s};function N(t,e,n){return t.g=n,{value:e}}function Mt(t){this.g=new Rt,this.h=t}function Yt(t,e){Pt(t.g);var n=t.g.i;return n?Ut(t,"return"in n?n.return:function(r){return{value:r,done:!0}},e,t.g.return):(t.g.return(e),tt(t))}function Ut(t,e,n,r){try{var i=e.call(t.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var c=i.value}catch(o){return t.g.i=null,Ft(t.g,o),tt(t)}return t.g.i=null,r.call(t.g,c),tt(t)}function tt(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(n){t.g.h=void 0,Ft(t.g,n)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function Z(t){this.next=function(e){return Pt(t.g),t.g.i?e=Ut(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=tt(t)),e},this.throw=function(e){return Pt(t.g),t.g.i?e=Ut(t,t.g.i.throw,e,t.g.o):(Ft(t.g,e),e=tt(t)),e},this.return=function(e){return Yt(t,e)},this[Symbol.iterator]=function(){return this}}function C(t,e){return e=new Z(new Mt(e)),pt&&t.prototype&&pt(e,t.prototype),e}function u(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var c=n++;return{value:e(c,t[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}var l=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};I("Object.assign",function(t){return t||l}),I("Promise",function(t){function e(o){this.h=0,this.i=void 0,this.g=[],this.o=!1;var s=this.j();try{o(s.resolve,s.reject)}catch(a){s.reject(a)}}function n(){this.g=null}function r(o){return o instanceof e?o:new e(function(s){s(o)})}if(t)return t;n.prototype.h=function(o){if(this.g==null){this.g=[];var s=this;this.i(function(){s.l()})}this.g.push(o)};var i=M.setTimeout;n.prototype.i=function(o){i(o,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var o=this.g;this.g=[];for(var s=0;s<o.length;++s){var a=o[s];o[s]=null;try{a()}catch(h){this.j(h)}}}this.g=null},n.prototype.j=function(o){this.i(function(){throw o})},e.prototype.j=function(){function o(h){return function(m){a||(a=!0,h.call(s,m))}}var s=this,a=!1;return{resolve:o(this.C),reject:o(this.l)}},e.prototype.C=function(o){if(o===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.F(o);else{t:switch(typeof o){case"object":var s=o!=null;break t;case"function":s=!0;break t;default:s=!1}s?this.u(o):this.m(o)}},e.prototype.u=function(o){var s=void 0;try{s=o.then}catch(a){this.l(a);return}typeof s=="function"?this.G(s,o):this.m(o)},e.prototype.l=function(o){this.s(2,o)},e.prototype.m=function(o){this.s(1,o)},e.prototype.s=function(o,s){if(this.h!=0)throw Error("Cannot settle("+o+", "+s+"): Promise already settled in state"+this.h);this.h=o,this.i=s,this.h===2&&this.D(),this.A()},e.prototype.D=function(){var o=this;i(function(){if(o.B()){var s=M.console;typeof s<"u"&&s.error(o.i)}},1)},e.prototype.B=function(){if(this.o)return!1;var o=M.CustomEvent,s=M.Event,a=M.dispatchEvent;return typeof a>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof s=="function"?o=new s("unhandledrejection",{cancelable:!0}):(o=M.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.i,a(o))},e.prototype.A=function(){if(this.g!=null){for(var o=0;o<this.g.length;++o)c.h(this.g[o]);this.g=null}};var c=new n;return e.prototype.F=function(o){var s=this.j();o.J(s.resolve,s.reject)},e.prototype.G=function(o,s){var a=this.j();try{o.call(s,a.resolve,a.reject)}catch(h){a.reject(h)}},e.prototype.then=function(o,s){function a(O,b){return typeof O=="function"?function(g){try{h(O(g))}catch(w){m(w)}}:b}var h,m,F=new e(function(O,b){h=O,m=b});return this.J(a(o,h),a(s,m)),F},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.J=function(o,s){function a(){switch(h.h){case 1:o(h.i);break;case 2:s(h.i);break;default:throw Error("Unexpected state: "+h.h)}}var h=this;this.g==null?c.h(a):this.g.push(a),this.o=!0},e.resolve=r,e.reject=function(o){return new e(function(s,a){a(o)})},e.race=function(o){return new e(function(s,a){for(var h=X(o),m=h.next();!m.done;m=h.next())r(m.value).J(s,a)})},e.all=function(o){var s=X(o),a=s.next();return a.done?r([]):new e(function(h,m){function F(g){return function(w){O[g]=w,b--,b==0&&h(O)}}var O=[],b=0;do O.push(void 0),b++,r(a.value).J(F(O.length-1),m),a=s.next();while(!a.done)})},e}),I("Object.is",function(t){return t||function(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}}),I("Array.prototype.includes",function(t){return t||function(e,n){var r=this;r instanceof String&&(r=String(r));var i=r.length;for(n=n||0,0>n&&(n=Math.max(n+i,0));n<i;n++){var c=r[n];if(c===e||Object.is(c,e))return!0}return!1}}),I("String.prototype.includes",function(t){return t||function(e,n){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,n||0)!==-1}}),I("Array.prototype.keys",function(t){return t||function(){return u(this,function(e){return e})}});var y=this||self;function p(t,e){t=t.split(".");var n=y;t[0]in n||typeof n.execScript>"u"||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)t.length||e===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=e}function U(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var Y,f=typeof TextDecoder<"u",v,R=typeof TextEncoder<"u";function B(t){if(R)t=(v||(v=new TextEncoder)).encode(t);else{var e=void 0;e=e===void 0?!1:e;for(var n=0,r=new Uint8Array(3*t.length),i=0;i<t.length;i++){var c=t.charCodeAt(i);if(128>c)r[n++]=c;else{if(2048>c)r[n++]=c>>6|192;else{if(55296<=c&&57343>=c){if(56319>=c&&i<t.length){var o=t.charCodeAt(++i);if(56320<=o&&57343>=o){c=1024*(c-55296)+o-56320+65536,r[n++]=c>>18|240,r[n++]=c>>12&63|128,r[n++]=c>>6&63|128,r[n++]=c&63|128;continue}else i--}if(e)throw Error("Found an unpaired surrogate");c=65533}r[n++]=c>>12|224,r[n++]=c>>6&63|128}r[n++]=c&63|128}}t=r.subarray(0,n)}return t}var Q={},st=null;function et(t,e){e===void 0&&(e=0),wt(),e=Q[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,c=0;i<t.length-2;i+=3){var o=t[i],s=t[i+1],a=t[i+2],h=e[o>>2];o=e[(o&3)<<4|s>>4],s=e[(s&15)<<2|a>>6],a=e[a&63],n[c++]=h+o+s+a}switch(h=0,a=r,t.length-i){case 2:h=t[i+1],a=e[(h&15)<<2]||r;case 1:t=t[i],n[c]=e[t>>2]+e[(t&3)<<4|h>>4]+a+r}return n.join("")}function ct(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);var r=new Uint8Array(n),i=0;return Lt(t,function(c){r[i++]=c}),r.subarray(0,i)}function Lt(t,e){function n(a){for(;r<t.length;){var h=t.charAt(r++),m=st[h];if(m!=null)return m;if(!/^[\s\xa0]*$/.test(h))throw Error("Unknown base64 encoding at char: "+h)}return a}wt();for(var r=0;;){var i=n(-1),c=n(0),o=n(64),s=n(64);if(s===64&&i===-1)break;e(i<<2|c>>4),o!=64&&(e(c<<4&240|o>>2),s!=64&&e(o<<6&192|s))}}function wt(){if(!st){st={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));Q[n]=r;for(var i=0;i<r.length;i++){var c=r[i];st[c]===void 0&&(st[c]=i)}}}}var Ee=typeof Uint8Array.prototype.slice=="function",oe;function ue(t,e,n){return e===n?oe||(oe=new Uint8Array(0)):Ee?t.slice(e,n):new Uint8Array(t.subarray(e,n))}var lt=0,gt=0;function se(t,e){e=e===void 0?{}:e,e=e.v===void 0?!1:e.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=e,t&&ce(this,t)}function ce(t,e){e=e.constructor===Uint8Array?e:e.constructor===ArrayBuffer?new Uint8Array(e):e.constructor===Array?new Uint8Array(e):e.constructor===String?ct(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t.h=e,t.j=0,t.i=t.h.length,t.g=t.j}se.prototype.reset=function(){this.g=this.j};function Nt(t){var e=t.h,n=e[t.g],r=n&127;return 128>n?(t.g+=1,r):(n=e[t.g+1],r|=(n&127)<<7,128>n?(t.g+=2,r):(n=e[t.g+2],r|=(n&127)<<14,128>n?(t.g+=3,r):(n=e[t.g+3],r|=(n&127)<<21,128>n?(t.g+=4,r):(n=e[t.g+4],r|=(n&15)<<28,128>n?(t.g+=5,r>>>0):(t.g+=5,128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&t.g++,r)))))}function nt(t){var e=t.h[t.g],n=t.h[t.g+1],r=t.h[t.g+2],i=t.h[t.g+3];return t.g+=4,n=(e<<0|n<<8|r<<16|i<<24)>>>0,t=2*(n>>31)+1,e=n>>>23&255,n&=8388607,e==255?n?NaN:1/0*t:e==0?t*Math.pow(2,-149)*n:t*Math.pow(2,e-150)*(n+Math.pow(2,23))}var le=[];function Ht(){this.g=new Uint8Array(64),this.h=0}Ht.prototype.push=function(t){if(!(this.h+1<this.g.length)){var e=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(e)}this.g[this.h++]=t},Ht.prototype.length=function(){return this.h},Ht.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,ue(t,0,e)};function vt(t,e){for(;127<e;)t.push(e&127|128),e>>>=7;t.push(e)}function Wt(t){var e={},n=e.N===void 0?!1:e.N;this.o={v:e.v===void 0?!1:e.v},this.N=n,e=this.o,le.length?(n=le.pop(),e&&(n.v=e.v),t&&ce(n,t),t=n):t=new se(t,e),this.g=t,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Wt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function bt(t){var e=t.g;if((e=e.g==e.i)||(e=t.j)||(e=t.g,e=e.l||0>e.g||e.g>e.i),e)return!1;t.m=t.g.g,e=Nt(t.g);var n=e&7;return n!=0&&n!=5&&n!=1&&n!=2&&n!=3&&n!=4?(t.j=!0,!1):(t.i=e,t.l=e>>>3,t.h=n,!0)}function jt(t){switch(t.h){case 0:if(t.h!=0)jt(t);else{for(t=t.g;t.h[t.g]&128;)t.g++;t.g++}break;case 1:t.h!=1?jt(t):(t=t.g,t.g+=8);break;case 2:if(t.h!=2)jt(t);else{var e=Nt(t.g);t=t.g,t.g+=e}break;case 5:t.h!=5?jt(t):(t=t.g,t.g+=4);break;case 3:e=t.l;do{if(!bt(t)){t.j=!0;break}if(t.h==4){t.l!=e&&(t.j=!0);break}jt(t)}while(1);break;default:t.j=!0}}function ae(t,e,n){var r=t.g.i,i=Nt(t.g);return i=t.g.g+i,t.g.i=i,n(e,t),t.g.g=i,t.g.i=r,e}function fe(t){var e=Nt(t.g);t=t.g;var n=t.g;t.g+=e,t=t.h;var r;if(f)(r=Y)||(r=Y=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(t.subarray(n,n+e));else{e=n+e;for(var i=[],c=null,o,s,a;n<e;)o=t[n++],128>o?i.push(o):224>o?n>=e?i.push(65533):(s=t[n++],194>o||(s&192)!==128?(n--,i.push(65533)):i.push((o&31)<<6|s&63)):240>o?n>=e-1?i.push(65533):(s=t[n++],(s&192)!==128||o===224&&160>s||o===237&&160<=s||((r=t[n++])&192)!==128?(n--,i.push(65533)):i.push((o&15)<<12|(s&63)<<6|r&63)):244>=o?n>=e-2?i.push(65533):(s=t[n++],(s&192)!==128||(o<<28)+(s-144)>>30!==0||((r=t[n++])&192)!==128||((a=t[n++])&192)!==128?(n--,i.push(65533)):(o=(o&7)<<18|(s&63)<<12|(r&63)<<6|a&63,o-=65536,i.push((o>>10&1023)+55296,(o&1023)+56320))):i.push(65533),8192<=i.length&&(c=U(c,i),i.length=0);r=U(c,i)}return r}function $t(){this.h=[],this.i=0,this.g=new Ht}function At(t,e){e.length!==0&&(t.h.push(e),t.i+=e.length)}function Jt(t){var e=t.i+t.g.length();if(e===0)return new Uint8Array(0);e=new Uint8Array(e);for(var n=t.h,r=n.length,i=0,c=0;c<r;c++){var o=n[c];o.length!==0&&(e.set(o,i),i+=o.length)}return n=t.g,r=n.h,r!==0&&(e.set(n.g.subarray(0,r),i),n.h=0),t.h=[e],e}function rt(t,e,n){if(n!=null){vt(t.g,8*e+5),t=t.g;var r=n;r=(n=0>r?1:0)?-r:r,r===0?0<1/r?lt=gt=0:(gt=0,lt=2147483648):isNaN(r)?(gt=0,lt=2147483647):34028234663852886e22<r?(gt=0,lt=(n<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),gt=0,lt=(n<<31|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),r=Math.round(8388608*r)&8388607,gt=0,lt=(n<<31|e+127<<23|r)>>>0),n=lt,t.push(n>>>0&255),t.push(n>>>8&255),t.push(n>>>16&255),t.push(n>>>24&255)}}var _e=typeof Uint8Array=="function";function he(t,e,n){if(t!=null)return typeof t=="object"?_e&&t instanceof Uint8Array?n(t):ge(t,e,n):e(t)}function ge(t,e,n){if(Array.isArray(t)){for(var r=Array(t.length),i=0;i<t.length;i++)r[i]=he(t[i],e,n);return Array.isArray(t)&&t.W&&Ct(r),r}r={};for(i in t)r[i]=he(t[i],e,n);return r}function Te(t){return typeof t=="number"?isFinite(t)?t:String(t):t}var Re={W:{value:!0,configurable:!0}};function Ct(t){return Array.isArray(t)&&!Object.isFrozen(t)&&Object.defineProperties(t,Re),t}var ve;function K(t,e,n){var r=ve;ve=null,t||(t=r),r=this.constructor.ca,t||(t=r?[r]:[]),this.j=r?0:-1,this.i=null,this.g=t;t:{if(r=this.g.length,t=r-1,r&&(r=this.g[t],r!==null&&typeof r=="object"&&r.constructor===Object)){this.l=t-this.j,this.h=r;break t}e!==void 0&&-1<e?(this.l=Math.max(e,t+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(n)for(e=0;e<n.length;e++)t=n[e],t<this.l?(t+=this.j,(r=this.g[t])?Ct(r):this.g[t]=Vt):(pe(this),(r=this.h[t])?Ct(r):this.h[t]=Vt)}var Vt=Object.freeze(Ct([]));function pe(t){var e=t.l+t.j;t.g[e]||(t.h=t.g[e]={})}function H(t,e,n){return e===-1?null:(n===void 0?0:n)||e>=t.l?t.h?t.h[e]:void 0:t.g[e+t.j]}function de(t){var e=e===void 0?!1:e,n=H(t,1,e);return n==null&&(n=Vt),n===Vt&&(n=Ct([]),P(t,1,n,e)),n}function ot(t,e,n){return t=H(t,e),t=t==null?t:+t,t==null?n===void 0?0:n:t}function P(t,e,n,r){(r===void 0?0:r)||e>=t.l?(pe(t),t.h[e]=n):t.g[e+t.j]=n}function Gt(t,e){t.i||(t.i={});var n=t.i[1];if(!n){var r=de(t);n=[];for(var i=0;i<r.length;i++)n[i]=new e(r[i]);t.i[1]=n}return n}function ye(t,e,n,r){var i=Gt(t,n);e=e||new n,t=de(t),r!=null?(i.splice(r,0,e),t.splice(r,0,xt(e))):(i.push(e),t.push(xt(e)))}K.prototype.toJSON=function(){var t=xt(this);return ge(t,Te,et)};function xt(t,e){if(t.i)for(var n in t.i){var r=t.i[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]&&xt(r[i]);else r&&xt(r)}return t.g}K.prototype.toString=function(){return xt(this).toString()};function me(t,e){return t=H(t,e),t==null?0:t}function we(t,e){return t=H(t,e),t==null?"":t}function Qt(t,e){if(t=t.m){At(e,e.g.end());for(var n=0;n<t.length;n++)At(e,t[n])}}function Dt(t,e){if(e.h==4)return!1;var n=e.m;return jt(e),e.N||(e=ue(e.g.h,n,e.g.g),(n=t.m)?n.push(e):t.m=[e]),!0}function $(t,e){var n=void 0;return new(n||(n=Promise))(function(r,i){function c(a){try{s(e.next(a))}catch(h){i(h)}}function o(a){try{s(e.throw(a))}catch(h){i(h)}}function s(a){a.done?r(a.value):new n(function(h){h(a.value)}).then(c,o)}s((e=e.apply(t,void 0)).next())})}function It(t){K.call(this,t)}ht(It,K);function Pe(t,e){for(;bt(e);)switch(e.i){case 8:var n=Nt(e.g);P(t,1,n);break;case 21:n=nt(e.g),P(t,2,n);break;case 26:n=fe(e),P(t,3,n);break;case 34:n=fe(e),P(t,4,n);break;default:if(!Dt(t,e))return t}return t}function zt(t){K.call(this,t,-1,Fe)}ht(zt,K),zt.prototype.addClassification=function(t,e){ye(this,t,It,e)};var Fe=[1];function Bt(t){K.call(this,t)}ht(Bt,K);function Me(t,e){for(;bt(e);)switch(e.i){case 13:var n=nt(e.g);P(t,1,n);break;case 21:n=nt(e.g),P(t,2,n);break;case 29:n=nt(e.g),P(t,3,n);break;case 37:n=nt(e.g),P(t,4,n);break;case 45:n=nt(e.g),P(t,5,n);break;default:if(!Dt(t,e))return t}return t}function be(t){K.call(this,t,-1,Ue)}ht(be,K);var Ue=[1];function Zt(t){K.call(this,t)}ht(Zt,K);function je(t,e,n){if(n=t.createShader(n===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(n));return n}function Le(t){return Gt(t,It).map(function(e){return{index:me(e,1),Y:ot(e,2),label:H(e,3)!=null?we(e,3):void 0,displayName:H(e,4)!=null?we(e,4):void 0}})}function Ne(t){return{x:ot(t,1),y:ot(t,2),z:ot(t,3),visibility:H(t,4)!=null?ot(t,4):void 0}}function Kt(t,e){this.h=t,this.g=e,this.l=0}function Ae(t,e,n){return Ce(t,e),typeof t.g.canvas.transferToImageBitmap=="function"?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.g.canvas):(t.i===void 0&&(t.i=document.createElement("canvas")),new Promise(function(r){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),r(t.i)}))}function Ce(t,e){var n=t.g;if(t.m===void 0){var r=je(n,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=je(n,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),c=n.createProgram();if(n.attachShader(c,r),n.attachShader(c,i),n.linkProgram(c),!n.getProgramParameter(c,n.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+n.getProgramInfoLog(c));r=t.m=c,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:i},t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.I),n.vertexAttribPointer(t.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.enableVertexAttribArray(t.j.H),n.vertexAttribPointer(t.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.j,n.useProgram(t.m),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}function De(t){this.g=t}var Ie=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Be(t,e){return e+t}function xe(t,e){window[t]=e}function He(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(n){e.addEventListener("load",function(){n()},!1),e.addEventListener("error",function(){n()},!1),document.body.appendChild(e)})}function We(){return $(this,function t(){return C(t,function(e){switch(e.g){case 1:return e.m=2,N(e,WebAssembly.instantiate(Ie),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}function te(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||Be,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=e,t.options){e=X(Object.keys(t.options));for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;r!==void 0&&(this.j[n]=typeof r=="function"?r():r)}}}T=te.prototype,T.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Ve(t,e){return t.g.files===void 0?[]:typeof t.g.files=="function"?t.g.files(e):t.g.files}function qe(t){return $(t,function e(){var n=this,r,i,c,o,s,a,h,m,F,O,b;return C(e,function(g){switch(g.g){case 1:return r=n,n.R?(i=Ve(n,n.j),N(g,We(),2)):g.return();case 2:if(c=g.h,typeof window=="object")return xe("createMediapipeSolutionsWasm",{locateFile:n.locateFile}),xe("createMediapipeSolutionsPackedAssets",{locateFile:n.locateFile}),a=i.filter(function(w){return w.data!==void 0}),h=i.filter(function(w){return w.data===void 0}),m=Promise.all(a.map(function(w){var x=qt(r,w.url);if(w.path!==void 0){var S=w.path;x=x.then(function(q){return r.overrideFile(S,q),Promise.resolve(q)})}return x})),F=Promise.all(h.map(function(w){return w.simd===void 0||w.simd&&c||!w.simd&&!c?He(r.locateFile(w.url,r.S)):Promise.resolve()})).then(function(){return $(r,function w(){var x,S,q=this;return C(w,function(L){if(L.g==1)return x=window.createMediapipeSolutionsWasm,S=window.createMediapipeSolutionsPackedAssets,N(L,x(S),2);q.h=L.h,L.g=0})})}),O=function(){return $(r,function w(){var x=this;return C(w,function(S){return x.g.graph&&x.g.graph.url?S=N(S,qt(x,x.g.graph.url),0):(S.g=0,S=void 0),S})})}(),N(g,Promise.all([F,m,O]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return o=i.filter(function(w){return w.simd===void 0||w.simd&&c||!w.simd&&!c}).map(function(w){return r.locateFile(w.url,r.S)}),importScripts.apply(null,yt(o)),N(g,createMediapipeSolutionsWasm(Module),6);case 6:n.h=g.h,n.l=new OffscreenCanvas(1,1),n.h.canvas=n.l,s=n.h.GL.createContext(n.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),n.h.GL.makeContextCurrent(s),g.g=4;break;case 7:if(n.l=document.createElement("canvas"),b=n.l.getContext("webgl2",{}),!b&&(b=n.l.getContext("webgl",{}),!b))return alert("Failed to create WebGL canvas context when passing video frame."),g.return();n.D=b,n.h.canvas=n.l,n.h.createContext(n.l,!0,!0,{});case 4:n.i=new n.h.SolutionWasm,n.R=!1,g.g=0}})})}function Xe(t){return $(t,function e(){var n=this,r,i,c,o,s,a,h,m;return C(e,function(F){if(F.g==1){if(n.g.graph&&n.g.graph.url&&n.P===n.g.graph.url)return F.return();if(n.o=!0,!n.g.graph||!n.g.graph.url){F.g=2;return}return n.P=n.g.graph.url,N(F,qt(n,n.g.graph.url),3)}for(F.g!=2&&(r=F.h,n.i.loadGraph(r)),i=X(Object.keys(n.B)),c=i.next();!c.done;c=i.next())o=c.value,n.i.overrideFile(o,n.B[o]);if(n.B={},n.g.listeners)for(s=X(n.g.listeners),a=s.next();!a.done;a=s.next())h=a.value,Ge(n,h);m=n.j,n.j={},n.setOptions(m),F.g=0})})}T.reset=function(){return $(this,function t(){var e=this;return C(t,function(n){e.i&&(e.i.reset(),e.m={},e.s={}),n.g=0})})},T.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var r=[],i=[],c={},o=X(Object.keys(t)),s=o.next();!s.done;c={K:c.K,L:c.L},s=o.next()){var a=s.value;a in this.j&&this.j[a]===t[a]||(this.j[a]=t[a],s=e[a],s!==void 0&&(s.onChange&&(c.K=s.onChange,c.L=t[a],r.push(function(h){return function(){return $(n,function m(){var F,O=this;return C(m,function(b){if(b.g==1)return N(b,h.K(h.L),2);F=b.h,F===!0&&(O.o=!0),b.g=0})})}}(c))),s.graphOptionXref&&(a={valueNumber:s.type===1?t[a]:0,valueBoolean:s.type===0?t[a]:!1,valueString:s.type===2?t[a]:""},s=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),s.graphOptionXref),a),i.push(s))))}(r.length!==0||i.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(i),this.u=(this.u===void 0?[]:this.u).concat(r))}};function Ye(t){return $(t,function e(){var n=this,r,i,c,o,s,a,h;return C(e,function(m){switch(m.g){case 1:if(!n.o)return m.return();if(!n.u){m.g=2;break}r=X(n.u),i=r.next();case 3:if(i.done){m.g=5;break}return c=i.value,N(m,c(),4);case 4:i=r.next(),m.g=3;break;case 5:n.u=void 0;case 2:if(n.A){for(o=new n.h.GraphOptionChangeRequestList,s=X(n.A),a=s.next();!a.done;a=s.next())h=a.value,o.push_back(h);n.i.changeOptions(o),o.delete(),n.A=void 0}n.o=!1,m.g=0}})})}T.initialize=function(){return $(this,function t(){var e=this;return C(t,function(n){return n.g==1?N(n,qe(e),2):n.g!=3?N(n,Xe(e),3):N(n,Ye(e),0)})})};function qt(t,e){return $(t,function n(){var r=this,i,c;return C(n,function(o){return e in r.F?o.return(r.F[e]):(i=r.locateFile(e,""),c=fetch(i).then(function(s){return s.arrayBuffer()}),r.F[e]=c,o.return(c))})})}T.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},T.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},T.send=function(t,e){return $(this,function n(){var r=this,i,c,o,s,a,h,m,F,O;return C(n,function(b){switch(b.g){case 1:return r.g.inputs?(i=1e3*(e==null?performance.now():e),N(b,r.C,2)):b.return();case 2:return N(b,r.initialize(),3);case 3:for(c=new r.h.PacketDataList,o=X(Object.keys(t)),s=o.next();!s.done;s=o.next())if(a=s.value,h=r.g.inputs[a]){t:{var g=r,w=t[a];switch(h.type){case"video":var x=g.m[h.stream];if(x||(x=new Kt(g.h,g.D),g.m[h.stream]=x),g=x,g.l===0&&(g.l=g.h.createTexture()),typeof HTMLVideoElement<"u"&&w instanceof HTMLVideoElement){var S=w.videoWidth;x=w.videoHeight}else typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement?(S=w.naturalWidth,x=w.naturalHeight):(S=w.width,x=w.height);x={glName:g.l,width:S,height:x},S=g.g,S.canvas.width=x.width,S.canvas.height=x.height,S.activeTexture(S.TEXTURE0),g.h.bindTexture2d(g.l),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,w),g.h.bindTexture2d(0),g=x;break t;case"detections":for(x=g.m[h.stream],x||(x=new De(g.h),g.m[h.stream]=x),g=x,g.data||(g.data=new g.g.DetectionListData),g.data.reset(w.length),x=0;x<w.length;++x){S=w[x];var q=g.data,L=q.setBoundingBox,J=x,W=S.T,A=new Zt;P(A,1,W.Z),P(A,2,W.$),P(A,3,W.height),P(A,4,W.width),P(A,5,W.rotation),P(A,6,W.X);var k=W=new $t;rt(k,1,H(A,1)),rt(k,2,H(A,2)),rt(k,3,H(A,3)),rt(k,4,H(A,4)),rt(k,5,H(A,5));var _=H(A,6);if(_!=null&&_!=null){vt(k.g,48);var j=k.g,E=_;_=0>E,E=Math.abs(E);var d=E>>>0;for(E=Math.floor((E-d)/4294967296),E>>>=0,_&&(E=~E>>>0,d=(~d>>>0)+1,4294967295<d&&(d=0,E++,4294967295<E&&(E=0))),lt=d,gt=E,_=lt,d=gt;0<d||127<_;)j.push(_&127|128),_=(_>>>7|d<<25)>>>0,d>>>=7;j.push(_)}if(Qt(A,k),W=Jt(W),L.call(q,J,W),S.O)for(q=0;q<S.O.length;++q)A=S.O[q],k=!!A.visibility,L=g.data,J=L.addNormalizedLandmark,W=x,A=Object.assign(Object.assign({},A),{visibility:k?A.visibility:0}),k=new Bt,P(k,1,A.x),P(k,2,A.y),P(k,3,A.z),A.visibility&&P(k,4,A.visibility),j=A=new $t,rt(j,1,H(k,1)),rt(j,2,H(k,2)),rt(j,3,H(k,3)),rt(j,4,H(k,4)),rt(j,5,H(k,5)),Qt(k,j),A=Jt(A),J.call(L,W,A);if(S.M)for(q=0;q<S.M.length;++q){if(L=g.data,J=L.addClassification,W=x,A=S.M[q],k=new It,P(k,2,A.Y),A.index&&P(k,1,A.index),A.label&&P(k,3,A.label),A.displayName&&P(k,4,A.displayName),j=A=new $t,d=H(k,1),d!=null&&d!=null)if(vt(j.g,8),_=j.g,0<=d)vt(_,d);else{for(E=0;9>E;E++)_.push(d&127|128),d>>=7;_.push(1)}rt(j,2,H(k,2)),_=H(k,3),_!=null&&(_=B(_),vt(j.g,26),vt(j.g,_.length),At(j,j.g.end()),At(j,_)),_=H(k,4),_!=null&&(_=B(_),vt(j.g,34),vt(j.g,_.length),At(j,j.g.end()),At(j,_)),Qt(k,j),A=Jt(A),J.call(L,W,A)}}g=g.data;break t;default:g={}}}switch(m=g,F=h.stream,h.type){case"video":c.pushTexture2d(Object.assign(Object.assign({},m),{stream:F,timestamp:i}));break;case"detections":O=m,O.stream=F,O.timestamp=i,c.pushDetectionList(O);break;default:throw Error("Unknown input config type: '"+h.type+"'")}}return r.i.send(c),N(b,r.C,4);case 4:c.delete(),b.g=0}})})};function $e(t,e,n){return $(t,function r(){var i,c,o,s,a,h,m=this,F,O,b,g,w,x,S,q;return C(r,function(L){switch(L.g){case 1:if(!n)return L.return(e);for(i={},c=0,o=X(Object.keys(n)),s=o.next();!s.done;s=o.next())a=s.value,h=n[a],typeof h!="string"&&h.type==="texture"&&e[h.stream]!==void 0&&++c;1<c&&(m.G=!1),F=X(Object.keys(n)),s=F.next();case 2:if(s.done){L.g=4;break}if(O=s.value,b=n[O],typeof b=="string")return S=i,q=O,N(L,Je(m,O,e[b]),14);if(g=e[b.stream],b.type==="detection_list"){if(g){for(var J=g.getRectList(),W=g.getLandmarksList(),A=g.getClassificationsList(),k=[],_=0;_<J.size();++_){var j=J.get(_);t:{var E=new Zt;for(j=new Wt(j);bt(j);)switch(j.i){case 13:var d=nt(j.g);P(E,1,d);break;case 21:d=nt(j.g),P(E,2,d);break;case 29:d=nt(j.g),P(E,3,d);break;case 37:d=nt(j.g),P(E,4,d);break;case 45:d=nt(j.g),P(E,5,d);break;case 48:for(var D=j.g,V=128,ee=0,dt=d=0;4>dt&&128<=V;dt++)V=D.h[D.g++],ee|=(V&127)<<7*dt;if(128<=V&&(V=D.h[D.g++],ee|=(V&127)<<28,d|=(V&127)>>4),128<=V)for(dt=0;5>dt&&128<=V;dt++)V=D.h[D.g++],d|=(V&127)<<7*dt+3;128>V?(D=ee>>>0,V=d>>>0,(d=V&2147483648)&&(D=~D+1>>>0,V=~V>>>0,D==0&&(V=V+1>>>0)),D=4294967296*V+(D>>>0),d=d?-D:D):(D.l=!0,d=void 0),P(E,6,d);break;default:if(!Dt(E,j))break t}}E={Z:ot(E,1),$:ot(E,2),height:ot(E,3),width:ot(E,4),rotation:ot(E,5,0),X:me(E,6)},d=W.get(_);t:for(j=new be,d=new Wt(d);bt(d);)switch(d.i){case 10:D=ae(d,new Bt,Me),ye(j,D,Bt,void 0);break;default:if(!Dt(j,d))break t}j=Gt(j,Bt).map(Ne),D=A.get(_);t:for(d=new zt,D=new Wt(D);bt(D);)switch(D.i){case 10:d.addClassification(ae(D,new It,Pe));break;default:if(!Dt(d,D))break t}E={T:E,O:j,M:Le(d)},k.push(E)}J=k}else J=[];i[O]=J,L.g=7;break}if(b.type==="proto_list"){if(g){for(J=Array(g.size()),W=0;W<g.size();W++)J[W]=g.get(W);g.delete()}else J=[];i[O]=J,L.g=7;break}if(g===void 0){L.g=3;break}if(b.type==="float_list"){i[O]=g,L.g=7;break}if(b.type==="proto"){i[O]=g,L.g=7;break}if(b.type!=="texture")throw Error("Unknown output config type: '"+b.type+"'");return w=m.s[O],w||(w=new Kt(m.h,m.D),m.s[O]=w),N(L,Ae(w,g,m.G),13);case 13:x=L.h,i[O]=x;case 7:b.transform&&i[O]&&(i[O]=b.transform(i[O])),L.g=3;break;case 14:S[q]=L.h;case 3:s=F.next(),L.g=2;break;case 4:return L.return(i)}})})}function Je(t,e,n){return $(t,function r(){var i=this,c;return C(r,function(o){return typeof n=="number"||n instanceof Uint8Array||n instanceof i.h.Uint8BlobList?o.return(n):n instanceof i.h.Texture2dDataOut?(c=i.s[e],c||(c=new Kt(i.h,i.D),i.s[e]=c),o.return(Ae(c,n,i.G))):o.return(void 0)})})}function Ge(t,e){for(var n=e.name||"$",r=[].concat(yt(e.wants)),i=new t.h.StringList,c=X(e.wants),o=c.next();!o.done;o=c.next())i.push_back(o.value);c=t.h.PacketListener.implement({onResults:function(s){for(var a={},h=0;h<e.wants.length;++h)a[r[h]]=s.get(h);var m=t.listeners[n];m&&(t.C=$e(t,a,e.outs).then(function(F){F=m(F);for(var O=0;O<e.wants.length;++O){var b=a[r[O]];typeof b=="object"&&b.hasOwnProperty&&b.hasOwnProperty("delete")&&b.delete()}F&&(t.C=F)}))}}),t.i.attachMultiListener(i,c),i.delete()}T.onResults=function(t,e){this.listeners[e||"$"]=t},p("Solution",te),p("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Oe(t){switch(t===void 0&&(t=0),t){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function Se(t){var e=this;t=t||{},this.g=new te({locateFile:t.locateFile,files:function(n){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:Oe(n.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(n){return $(e,function r(){var i,c,o=this,s;return C(r,function(a){return a.g==1?(i=Oe(n),c="third_party/mediapipe/modules/selfie_segmentation/"+i,N(a,qt(o.g,i),2)):(s=a.h,o.g.overrideFile(c,s),a.return(!0))})})}}}})}T=Se.prototype,T.close=function(){return this.g.close(),Promise.resolve()},T.onResults=function(t){this.g.onResults(t)},T.initialize=function(){return $(this,function t(){var e=this;return C(t,function(n){return N(n,e.g.initialize(),0)})})},T.reset=function(){this.g.reset()},T.send=function(t){return $(this,function e(){var n=this;return C(e,function(r){return N(r,n.g.send(t),0)})})},T.setOptions=function(t){this.g.setOptions(t)},p("SelfieSegmentation",Se),p("VERSION","0.1.1632777926")}).call(kt);const ke=document.querySelector("video"),ne=document.querySelector("canvas"),at=ne.getContext("2d"),re=document.querySelector(".images-box"),Ze=document.querySelector("button");let Xt=null;const Ke=T=>{const G=T.target.localeName==="img"?T.target:T.target.closest("img");if(!G)return;const it=re.querySelector(".selected");it&&it.classList.remove("selected"),G.classList.add("selected"),Xt=G},tn=()=>{Xt=null,at.clearRect(0,0,Ot,St);const T=re.querySelector(".selected");T&&T.classList.remove("selected")};re.addEventListener("click",Ke);Ze.addEventListener("click",tn);const Ot=ne.width=window.innerWidth,St=ne.height=window.innerHeight;function en(T){!Xt||(at.save(),at.clearRect(0,0,Ot,St),at.drawImage(T.segmentationMask,0,0,Ot,St),at.globalCompositeOperation="source-out",at.drawImage(Xt,0,0,Ot,St),at.globalCompositeOperation="destination-atop",at.drawImage(T.image,0,0,Ot,St),at.restore())}const ie=new ze.SelfieSegmentation({locateFile:T=>`./node_modules/@mediapipe/selfie_segmentation/${T}`});ie.setOptions({modelSelection:1});ie.onResults(en);const nn=new Qe.Camera(ke,{onFrame:async()=>{await ie.send({image:ke})},facingMode:void 0,width:Ot,height:St});nn.start();
